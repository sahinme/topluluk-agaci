{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _jsxFileName = \"D:\\\\repos\\\\saalla-next.js\\\\components\\\\CommentList\\\\components\\\\comment.jsx\",\n    _s = $RefreshSig$();\n\nvar __jsx = React.createElement;\nimport React, { useState } from \"react\";\nimport { useRouter } from \"next/router\";\nimport Link from \"next/link\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport ListItem from \"@material-ui/core/ListItem\";\nimport Divider from \"@material-ui/core/Divider\";\nimport SendIcon from \"@material-ui/icons/Send\";\nimport ListItemText from \"@material-ui/core/ListItemText\";\nimport ListItemAvatar from \"@material-ui/core/ListItemAvatar\";\nimport Avatar from \"@material-ui/core/Avatar\";\nimport CommentOutlinedIcon from \"@material-ui/icons/CommentOutlined\";\nimport DeleteOutlineIcon from \"@material-ui/icons/DeleteOutline\";\nimport FavoriteBorderOutlinedIcon from \"@material-ui/icons/FavoriteBorderOutlined\";\nimport { TextField, Button } from \"@material-ui/core\";\nimport Reply from \"./reply\";\nimport { createReplyRequest, likeCommentRequest, unlikeCommentRequest, deleteCommentRequest, deleteCommentModeratorRequest } from \"../../../lib/comment/actions\";\nimport { connect } from \"react-redux\";\nimport { readLocalStorage, isLogged } from \"../../../lib/helpers\";\nimport DeleteCommentPop from \"./deleteCommentPop\";\nvar useStyles = makeStyles(function (theme) {\n  return {\n    likeIcon: {\n      marginLeft: \"0.5rem\",\n      borderRadius: \"2px\",\n      display: \"inline-block\",\n      padding: \"4px\",\n      cursor: \"pointer\"\n    },\n    commentIcon: {\n      borderRadius: \"2px\",\n      display: \"inline-block\",\n      padding: \"4px\"\n    },\n    deleteIcon: {\n      borderRadius: \"2px\",\n      display: \"inline-block\",\n      padding: \"4px\",\n      cursor: \"pointer\",\n      marginLeft: \"0.5rem\"\n    }\n  };\n});\n\nfunction Comment(props) {\n  _s();\n\n  var _this = this;\n\n  var classes = useStyles();\n\n  var _useState = useState(false),\n      isOpen = _useState[0],\n      setOpen = _useState[1];\n\n  var _useState2 = useState(\"\"),\n      text = _useState2[0],\n      setText = _useState2[1];\n\n  var _React$useState = React.useState(null),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      anchorEl = _React$useState2[0],\n      setAnchorEl = _React$useState2[1];\n\n  var router = useRouter();\n  var item = props.item;\n\n  var handleChange = function handleChange(e) {\n    setText(e.target.value);\n  };\n\n  var handleSubmit = function handleSubmit() {\n    var token = readLocalStorage(\"token\");\n    var user = readLocalStorage(\"user\");\n\n    if (!token || !user) {\n      router.push(\"/giris-yap\");\n      return;\n    } else {\n      var createReply = props.createReply,\n          postId = props.postId,\n          _item = props.item;\n      var values = {\n        postId: postId,\n        commentId: _item.id,\n        content: text\n      };\n      createReply(values);\n      document.getElementById(\"comment\").value = \"\";\n      setOpen(false);\n    }\n  };\n\n  var onLikeComment = function onLikeComment() {\n    if (!isLogged()) {\n      router.push(\"/giris-yap\");\n    }\n\n    var values = {\n      postId: props.postId,\n      commentId: item.id\n    };\n    var likeComment = props.likeComment;\n    likeComment(values);\n  };\n\n  var onUnlike = function onUnlike() {\n    if (!isLogged()) {\n      router.push(\"/giris-yap\");\n    }\n\n    var values = {\n      postId: props.postId,\n      commentId: item.id\n    };\n    var unLikeComment = props.unLikeComment;\n    unLikeComment(values);\n  };\n\n  var onDeleteComment = function onDeleteComment() {\n    var values = {\n      commentId: item.id,\n      postId: props.postId\n    };\n    var deleteComment = props.deleteComment;\n    deleteComment(values);\n    handleClose();\n  };\n\n  var onDeleteCommentModerator = function onDeleteCommentModerator() {\n    var values = {\n      commentId: item.id,\n      postId: props.postId\n    };\n    var deleteCommentModerator = props.deleteCommentModerator;\n    deleteCommentModerator(values);\n    handleClose();\n  };\n\n  var handleClick = function handleClick(event) {\n    setAnchorEl(event.currentTarget);\n  };\n\n  var handleClose = function handleClose() {\n    setAnchorEl(null);\n  };\n\n  var renderDeleteIcon = function renderDeleteIcon() {\n    var auth = props.auth,\n        post = props.post;\n    var isOk = false;\n\n    if (auth && auth.user && auth.user.comMods && auth.user.comMods.length > 0) {\n      auth.user.comMods.map(function (x) {\n        if (x === post.community.slug) {\n          isOk = true;\n        }\n      });\n    } //setModerator(isOk);\n\n\n    return isOk;\n  };\n\n  var handleDeleteOperation = function handleDeleteOperation() {\n    var auth = props.auth;\n\n    if (renderDeleteIcon() && auth && auth.user && auth.user.username !== item.commentUserInfo.userName) {\n      onDeleteCommentModerator();\n    } else {\n      onDeleteComment();\n    }\n  };\n\n  return __jsx(React.Fragment, {\n    key: item.id,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 5\n    }\n  }, __jsx(ListItem, {\n    className: \"comment_item\",\n    alignItems: \"flex-start\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 7\n    }\n  }, __jsx(ListItemAvatar, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 9\n    }\n  }, __jsx(Avatar, {\n    alt: \"Remy Sharp\",\n    src: item.commentUserInfo.profileImagePath,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 11\n    }\n  })), __jsx(ListItemText, {\n    primary: __jsx(Link, {\n      href: \"/\".concat(item.commentUserInfo && item.commentUserInfo.userName),\n      style: {\n        color: \"black\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 13\n      }\n    }, item.commentUserInfo && item.commentUserInfo.userName),\n    secondary: item.content,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 9\n    }\n  })), __jsx(\"div\", {\n    className: \"comment_icon_container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 7\n    }\n  }, __jsx(CommentOutlinedIcon, {\n    className: classes.commentIcon,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 9\n    }\n  }), __jsx(Link, {\n    href: \"#\",\n    onClick: function onClick() {\n      return setOpen(!isOpen);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 9\n    }\n  }, __jsx(\"p\", {\n    className: \"reply_text\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 11\n    }\n  }, isOpen ? \"boşver\" : \"salla\")), __jsx(FavoriteBorderOutlinedIcon, {\n    className: item.isLoggedLiked ? \"checked_comment_like_icon\" : \"comment_like_icon\",\n    onClick: item.isLoggedLiked ? onUnlike : onLikeComment,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 9\n    }\n  }), __jsx(\"p\", {\n    className: \"reply_text\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 185,\n      columnNumber: 9\n    }\n  }, item.likeCount), (item.isLoggedComment || renderDeleteIcon()) && __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 11\n    }\n  }, __jsx(DeleteOutlineIcon, {\n    onClick: handleClick,\n    className: \"comment_delete_icon\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 188,\n      columnNumber: 13\n    }\n  }), __jsx(DeleteCommentPop, {\n    onSubmit: handleDeleteOperation,\n    onClose: handleClose,\n    anchorEl: anchorEl,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 192,\n      columnNumber: 13\n    }\n  })), (item.isLoggedComment || renderDeleteIcon()) && __jsx(\"p\", {\n    className: \"reply_text\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 200,\n      columnNumber: 11\n    }\n  }, \"sil\")), isOpen && __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 204,\n      columnNumber: 9\n    }\n  }, __jsx(TextField, {\n    id: \"comment\",\n    label: \"Bu g\\xF6nderiye salla\",\n    multiline: true,\n    name: \"comment\",\n    onChange: handleChange,\n    rows: 4,\n    variant: \"outlined\",\n    style: {\n      width: \"100%\",\n      borderRadius: \"10px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 205,\n      columnNumber: 11\n    }\n  }), __jsx(Button, {\n    className: \"comment_button\",\n    variant: \"contained\",\n    color: \"primary\",\n    disabled: !text,\n    onClick: handleSubmit,\n    endIcon: __jsx(SendIcon, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 221,\n        columnNumber: 22\n      }\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 215,\n      columnNumber: 11\n    }\n  }, \"Salla Gitsin\")), item && item.replies && item.replies.map(function (reply, index) {\n    return __jsx(Reply, {\n      key: reply.id,\n      item: reply,\n      postId: props.postId,\n      commentId: item.id,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 230,\n        columnNumber: 11\n      }\n    });\n  }), __jsx(Divider, {\n    variant: \"inset\",\n    component: \"li\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 237,\n      columnNumber: 7\n    }\n  }));\n}\n\n_s(Comment, \"yC3KWEe+Ia1Bp31cA4CfAPqOCO0=\", false, function () {\n  return [useStyles, useRouter];\n});\n\n_c = Comment;\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return {\n    createReply: function createReply(payload) {\n      return dispatch(createReplyRequest(payload));\n    },\n    likeComment: function likeComment(payload) {\n      return dispatch(likeCommentRequest(payload));\n    },\n    unLikeComment: function unLikeComment(payload) {\n      return dispatch(unlikeCommentRequest(payload));\n    },\n    deleteComment: function deleteComment(payload) {\n      return dispatch(deleteCommentRequest(payload));\n    },\n    deleteCommentModerator: function deleteCommentModerator(payload) {\n      return dispatch(deleteCommentModeratorRequest(payload));\n    }\n  };\n};\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    auth: state.auth.data,\n    post: state.postDetail.data\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Comment);\n\nvar _c;\n\n$RefreshReg$(_c, \"Comment\");","map":{"version":3,"sources":["D:/repos/saalla-next.js/components/CommentList/components/comment.jsx"],"names":["React","useState","useRouter","Link","makeStyles","ListItem","Divider","SendIcon","ListItemText","ListItemAvatar","Avatar","CommentOutlinedIcon","DeleteOutlineIcon","FavoriteBorderOutlinedIcon","TextField","Button","Reply","createReplyRequest","likeCommentRequest","unlikeCommentRequest","deleteCommentRequest","deleteCommentModeratorRequest","connect","readLocalStorage","isLogged","DeleteCommentPop","useStyles","theme","likeIcon","marginLeft","borderRadius","display","padding","cursor","commentIcon","deleteIcon","Comment","props","classes","isOpen","setOpen","text","setText","anchorEl","setAnchorEl","router","item","handleChange","e","target","value","handleSubmit","token","user","push","createReply","postId","values","commentId","id","content","document","getElementById","onLikeComment","likeComment","onUnlike","unLikeComment","onDeleteComment","deleteComment","handleClose","onDeleteCommentModerator","deleteCommentModerator","handleClick","event","currentTarget","renderDeleteIcon","auth","post","isOk","comMods","length","map","x","community","slug","handleDeleteOperation","username","commentUserInfo","userName","profileImagePath","color","isLoggedLiked","likeCount","isLoggedComment","width","replies","reply","index","mapDispatchToProps","dispatch","payload","mapStateToProps","state","data","postDetail"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\r\nimport { useRouter } from \"next/router\";\r\nimport Link from \"next/link\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport ListItem from \"@material-ui/core/ListItem\";\r\nimport Divider from \"@material-ui/core/Divider\";\r\nimport SendIcon from \"@material-ui/icons/Send\";\r\nimport ListItemText from \"@material-ui/core/ListItemText\";\r\nimport ListItemAvatar from \"@material-ui/core/ListItemAvatar\";\r\nimport Avatar from \"@material-ui/core/Avatar\";\r\nimport CommentOutlinedIcon from \"@material-ui/icons/CommentOutlined\";\r\nimport DeleteOutlineIcon from \"@material-ui/icons/DeleteOutline\";\r\nimport FavoriteBorderOutlinedIcon from \"@material-ui/icons/FavoriteBorderOutlined\";\r\nimport { TextField, Button } from \"@material-ui/core\";\r\nimport Reply from \"./reply\";\r\nimport {\r\n  createReplyRequest,\r\n  likeCommentRequest,\r\n  unlikeCommentRequest,\r\n  deleteCommentRequest,\r\n  deleteCommentModeratorRequest,\r\n} from \"../../../lib/comment/actions\";\r\nimport { connect } from \"react-redux\";\r\nimport { readLocalStorage, isLogged } from \"../../../lib/helpers\";\r\nimport DeleteCommentPop from \"./deleteCommentPop\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  likeIcon: {\r\n    marginLeft: \"0.5rem\",\r\n    borderRadius: \"2px\",\r\n    display: \"inline-block\",\r\n    padding: \"4px\",\r\n    cursor: \"pointer\",\r\n  },\r\n  commentIcon: {\r\n    borderRadius: \"2px\",\r\n    display: \"inline-block\",\r\n    padding: \"4px\",\r\n  },\r\n  deleteIcon: {\r\n    borderRadius: \"2px\",\r\n    display: \"inline-block\",\r\n    padding: \"4px\",\r\n    cursor: \"pointer\",\r\n    marginLeft: \"0.5rem\",\r\n  },\r\n}));\r\n\r\nfunction Comment(props) {\r\n  const classes = useStyles();\r\n  const [isOpen, setOpen] = useState(false);\r\n  const [text, setText] = useState(\"\");\r\n  const [anchorEl, setAnchorEl] = React.useState(null);\r\n\r\n  const router = useRouter();\r\n\r\n  const { item } = props;\r\n\r\n  const handleChange = (e) => {\r\n    setText(e.target.value);\r\n  };\r\n\r\n  const handleSubmit = () => {\r\n    const token = readLocalStorage(\"token\");\r\n    const user = readLocalStorage(\"user\");\r\n    if (!token || !user) {\r\n      router.push(\"/giris-yap\");\r\n      return;\r\n    } else {\r\n      const { createReply, postId, item } = props;\r\n      const values = { postId, commentId: item.id, content: text };\r\n      createReply(values);\r\n      document.getElementById(\"comment\").value = \"\";\r\n      setOpen(false);\r\n    }\r\n  };\r\n\r\n  const onLikeComment = () => {\r\n    if (!isLogged()) {\r\n      router.push(\"/giris-yap\");\r\n    }\r\n    const values = { postId: props.postId, commentId: item.id };\r\n    const { likeComment } = props;\r\n    likeComment(values);\r\n  };\r\n\r\n  const onUnlike = () => {\r\n    if (!isLogged()) {\r\n      router.push(\"/giris-yap\");\r\n    }\r\n    const values = { postId: props.postId, commentId: item.id };\r\n    const { unLikeComment } = props;\r\n    unLikeComment(values);\r\n  };\r\n\r\n  const onDeleteComment = () => {\r\n    const values = { commentId: item.id, postId: props.postId };\r\n    const { deleteComment } = props;\r\n    deleteComment(values);\r\n    handleClose();\r\n  };\r\n\r\n  const onDeleteCommentModerator = () => {\r\n    const values = { commentId: item.id, postId: props.postId };\r\n    const { deleteCommentModerator } = props;\r\n    deleteCommentModerator(values);\r\n    handleClose();\r\n  };\r\n\r\n  const handleClick = (event) => {\r\n    setAnchorEl(event.currentTarget);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setAnchorEl(null);\r\n  };\r\n\r\n  const renderDeleteIcon = () => {\r\n    const { auth, post } = props;\r\n    let isOk = false;\r\n    if (\r\n      auth &&\r\n      auth.user &&\r\n      auth.user.comMods &&\r\n      auth.user.comMods.length > 0\r\n    ) {\r\n      auth.user.comMods.map((x) => {\r\n        if (x === post.community.slug) {\r\n          isOk = true;\r\n        }\r\n      });\r\n    }\r\n    //setModerator(isOk);\r\n    return isOk;\r\n  };\r\n\r\n  const handleDeleteOperation = () => {\r\n    const { auth } = props;\r\n    if (\r\n      renderDeleteIcon() &&\r\n      auth &&\r\n      auth.user &&\r\n      auth.user.username !== item.commentUserInfo.userName\r\n    ) {\r\n      onDeleteCommentModerator();\r\n    } else {\r\n      onDeleteComment();\r\n    }\r\n  };\r\n\r\n  return (\r\n    <React.Fragment key={item.id}>\r\n      <ListItem className=\"comment_item\" alignItems=\"flex-start\">\r\n        <ListItemAvatar>\r\n          <Avatar\r\n            alt=\"Remy Sharp\"\r\n            src={item.commentUserInfo.profileImagePath}\r\n          />\r\n        </ListItemAvatar>\r\n        <ListItemText\r\n          primary={\r\n            <Link\r\n              href={`/${item.commentUserInfo && item.commentUserInfo.userName}`}\r\n              style={{ color: \"black\" }}\r\n            >\r\n              {item.commentUserInfo && item.commentUserInfo.userName}\r\n            </Link>\r\n          }\r\n          secondary={item.content}\r\n        />\r\n      </ListItem>\r\n      <div className=\"comment_icon_container\">\r\n        <CommentOutlinedIcon className={classes.commentIcon} />\r\n        <Link href=\"#\" onClick={() => setOpen(!isOpen)}>\r\n          <p className=\"reply_text\">{isOpen ? \"boşver\" : \"salla\"}</p>\r\n        </Link>\r\n        <FavoriteBorderOutlinedIcon\r\n          className={\r\n            item.isLoggedLiked\r\n              ? \"checked_comment_like_icon\"\r\n              : \"comment_like_icon\"\r\n          }\r\n          onClick={item.isLoggedLiked ? onUnlike : onLikeComment}\r\n        />\r\n        <p className=\"reply_text\">{item.likeCount}</p>\r\n        {(item.isLoggedComment || renderDeleteIcon()) && (\r\n          <div>\r\n            <DeleteOutlineIcon\r\n              onClick={handleClick}\r\n              className=\"comment_delete_icon\"\r\n            />\r\n            <DeleteCommentPop\r\n              onSubmit={handleDeleteOperation}\r\n              onClose={handleClose}\r\n              anchorEl={anchorEl}\r\n            />\r\n          </div>\r\n        )}\r\n        {(item.isLoggedComment || renderDeleteIcon()) && (\r\n          <p className=\"reply_text\">sil</p>\r\n        )}\r\n      </div>\r\n      {isOpen && (\r\n        <div>\r\n          <TextField\r\n            id=\"comment\"\r\n            label=\"Bu gönderiye salla\"\r\n            multiline\r\n            name=\"comment\"\r\n            onChange={handleChange}\r\n            rows={4}\r\n            variant=\"outlined\"\r\n            style={{ width: \"100%\", borderRadius: \"10px\" }}\r\n          />\r\n          <Button\r\n            className=\"comment_button\"\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            disabled={!text}\r\n            onClick={handleSubmit}\r\n            endIcon={<SendIcon />}\r\n          >\r\n            Salla Gitsin\r\n          </Button>\r\n        </div>\r\n      )}\r\n      {item &&\r\n        item.replies &&\r\n        item.replies.map((reply, index) => (\r\n          <Reply\r\n            key={reply.id}\r\n            item={reply}\r\n            postId={props.postId}\r\n            commentId={item.id}\r\n          />\r\n        ))}\r\n      <Divider variant=\"inset\" component=\"li\" />\r\n    </React.Fragment>\r\n  );\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => ({\r\n  createReply: (payload) => dispatch(createReplyRequest(payload)),\r\n  likeComment: (payload) => dispatch(likeCommentRequest(payload)),\r\n  unLikeComment: (payload) => dispatch(unlikeCommentRequest(payload)),\r\n  deleteComment: (payload) => dispatch(deleteCommentRequest(payload)),\r\n  deleteCommentModerator: (payload) =>\r\n    dispatch(deleteCommentModeratorRequest(payload)),\r\n});\r\n\r\nconst mapStateToProps = (state) => ({\r\n  auth: state.auth.data,\r\n  post: state.postDetail.data,\r\n});\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Comment);\r\n"]},"metadata":{},"sourceType":"module"}