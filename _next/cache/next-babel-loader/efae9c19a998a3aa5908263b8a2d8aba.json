{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _jsxFileName = \"D:\\\\repos\\\\saalla-next.js\\\\components\\\\CommentList\\\\components\\\\reply.jsx\",\n    _s = $RefreshSig$();\n\nvar __jsx = React.createElement;\nimport React from \"react\";\nimport { useRouter } from \"next/router\";\nimport Link from \"next/link\";\nimport ListItem from \"@material-ui/core/ListItem\";\nimport ListItemText from \"@material-ui/core/ListItemText\";\nimport ListItemAvatar from \"@material-ui/core/ListItemAvatar\";\nimport Avatar from \"@material-ui/core/Avatar\";\nimport CommentOutlinedIcon from \"@material-ui/icons/CommentOutlined\";\nimport FavoriteBorderOutlinedIcon from \"@material-ui/icons/FavoriteBorderOutlined\";\nimport SendIcon from \"@material-ui/icons/Send\";\nimport DeleteCommentPop from \"./deleteCommentPop\";\nimport DeleteOutlineIcon from \"@material-ui/icons/DeleteOutline\";\nimport { TextField, Button } from \"@material-ui/core\";\nimport { useState } from \"react\";\nimport { deleteReplyRequest, createReplyRequest, likeReplyRequest, unlikeReplyRequest, deleteReplyModeratorRequest } from \"../../../lib/comment/actions\";\nimport { connect } from \"react-redux\";\nimport { isLogged } from \"../../../lib/helpers\";\n\nfunction Reply(props) {\n  _s();\n\n  var _this = this;\n\n  var _useState = useState(false),\n      isOpen = _useState[0],\n      setOpen = _useState[1];\n\n  var _useState2 = useState(\"\"),\n      text = _useState2[0],\n      setText = _useState2[1];\n\n  var _React$useState = React.useState(null),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      anchorEl = _React$useState2[0],\n      setAnchorEl = _React$useState2[1];\n\n  var router = useRouter();\n\n  var handleChange = function handleChange(e) {\n    setText(e.target.value);\n  };\n\n  var handleClick = function handleClick(event) {\n    setAnchorEl(event.currentTarget);\n  };\n\n  var handleClose = function handleClose() {\n    setAnchorEl(null);\n  };\n\n  var onDeleteReply = function onDeleteReply() {\n    var deleteReply = props.deleteReply,\n        postId = props.postId;\n    var values = {\n      replyId: item.id,\n      postId: postId\n    };\n    deleteReply(values);\n  };\n\n  var replyTo = function replyTo(username, content) {\n    return username == null ? __jsx(\"p\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 7\n      }\n    }, content) : __jsx(\"div\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 7\n      }\n    }, __jsx(Link, {\n      href: \"/\".concat(username),\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 9\n      }\n    }, \"@\".concat(username, \"  \")), content);\n  };\n\n  var onLikeReply = function onLikeReply() {\n    if (!isLogged()) {\n      router.push(\"/giris-yap\");\n    }\n\n    var values = {\n      postId: props.postId,\n      replyId: item.id\n    };\n    var likeReply = props.likeReply;\n    likeReply(values);\n  };\n\n  var onUnlike = function onUnlike() {\n    if (!isLogged()) {\n      router.push(\"/giris-yap\");\n    }\n\n    var values = {\n      postId: props.postId,\n      replyId: item.id\n    };\n    var unLikeReply = props.unLikeReply;\n    unLikeReply(values);\n  };\n\n  var handleSubmit = function handleSubmit() {\n    if (!isLogged()) {\n      router.push(\"/giris-yap\");\n      return;\n    } else {\n      var createReply = props.createReply,\n          postId = props.postId,\n          _item = props.item,\n          commentId = props.commentId;\n      var values = {\n        postId: postId,\n        commentId: commentId,\n        content: text,\n        parentId: _item.id\n      };\n      createReply(values);\n      document.getElementById(\"comment\").value = \"\";\n      setOpen(false);\n    }\n  };\n\n  var onDeleteReplyModerator = function onDeleteReplyModerator() {\n    var values = {\n      replyId: item.id,\n      postId: props.postId\n    };\n    var deleteReplyModerator = props.deleteReplyModerator;\n    deleteReplyModerator(values);\n    handleClose();\n  };\n\n  var renderDeleteIcon = function renderDeleteIcon() {\n    var auth = props.auth,\n        post = props.post;\n    var isOk = false;\n\n    if (auth && auth.user && auth.user.comMods && auth.user.comMods.length > 0) {\n      auth.user.comMods.map(function (x) {\n        if (x === post.community.slug) {\n          isOk = true;\n        }\n      });\n    } //setModerator(isOk);\n\n\n    return isOk;\n  };\n\n  var handleDeleteOperation = function handleDeleteOperation() {\n    var auth = props.auth;\n\n    if (renderDeleteIcon() && auth && auth.user && auth.user.username !== item.replyUserInfo.userName) {\n      onDeleteReplyModerator();\n    } else {\n      onDeleteReply();\n    }\n\n    handleClose();\n  };\n\n  var item = props.item;\n  var parent = item.parent;\n  return item && __jsx(\"div\", {\n    key: item.id,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 7\n    }\n  }, __jsx(ListItem, {\n    className: \"reply_item\",\n    alignItems: \"flex-start\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 9\n    }\n  }, __jsx(ListItemAvatar, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 11\n    }\n  }, __jsx(Avatar, {\n    alt: \"Remy Sharp\",\n    src: item.replyUserInfo.profileImagePath,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 13\n    }\n  })), __jsx(ListItemText, {\n    primary: item.replyUserInfo.userName,\n    secondary: replyTo(parent.parentReplyUserName, item.content),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 11\n    }\n  })), __jsx(\"div\", {\n    style: {\n      marginLeft: \"7.2rem\"\n    },\n    className: \"comment_icon_container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 9\n    }\n  }, __jsx(CommentOutlinedIcon, {\n    style: {\n      borderRadius: \"2px\",\n      display: \"inline-block\",\n      padding: \"4px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 11\n    }\n  }), __jsx(Link, {\n    href: \"#\",\n    onClick: function onClick() {\n      return setOpen(!isOpen);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 11\n    }\n  }, __jsx(\"p\", {\n    className: \"reply_text\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 13\n    }\n  }, isOpen ? \"boşver\" : \"salla\")), __jsx(FavoriteBorderOutlinedIcon, {\n    className: item.isLoggedLiked ? \"checked_comment_like_icon\" : \"comment_like_icon\",\n    onClick: item.isLoggedLiked ? onUnlike : onLikeReply,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 11\n    }\n  }), __jsx(\"p\", {\n    className: \"reply_text\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 11\n    }\n  }, item.likeCount), (item.isLoggedReply || renderDeleteIcon()) && __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 13\n    }\n  }, __jsx(DeleteOutlineIcon, {\n    onClick: handleClick,\n    className: \"comment_delete_icon\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 15\n    }\n  }), __jsx(DeleteCommentPop, {\n    onSubmit: handleDeleteOperation,\n    onClose: handleClose,\n    anchorEl: anchorEl,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 15\n    }\n  }))), isOpen && __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 11\n    }\n  }, __jsx(TextField, {\n    id: \"comment\",\n    label: \"Bu g\\xF6nderiye salla\",\n    multiline: true,\n    name: \"comment\",\n    onChange: handleChange,\n    rows: 4,\n    variant: \"outlined\",\n    style: {\n      width: \"100%\",\n      borderRadius: \"10px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 13\n    }\n  }), __jsx(Button, {\n    className: \"comment_button\",\n    variant: \"contained\",\n    color: \"primary\",\n    disabled: !text,\n    onClick: handleSubmit,\n    endIcon: __jsx(SendIcon, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 203,\n        columnNumber: 24\n      }\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 197,\n      columnNumber: 13\n    }\n  }, \"Salla Gitsin\")));\n}\n\n_s(Reply, \"CxubOXJBM3kgf75yfuERHaSyzEg=\", false, function () {\n  return [useRouter];\n});\n\n_c = Reply;\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return {\n    deleteReply: function deleteReply(payload) {\n      return dispatch(deleteReplyRequest(payload));\n    },\n    createReply: function createReply(payload) {\n      return dispatch(createReplyRequest(payload));\n    },\n    likeReply: function likeReply(payload) {\n      return dispatch(likeReplyRequest(payload));\n    },\n    unLikeReply: function unLikeReply(payload) {\n      return dispatch(unlikeReplyRequest(payload));\n    },\n    deleteReplyModerator: function deleteReplyModerator(payload) {\n      return dispatch(deleteReplyModeratorRequest(payload));\n    }\n  };\n};\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    auth: state.auth.data,\n    post: state.postDetail.data\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Reply);\n\nvar _c;\n\n$RefreshReg$(_c, \"Reply\");","map":{"version":3,"sources":["D:/repos/saalla-next.js/components/CommentList/components/reply.jsx"],"names":["React","useRouter","Link","ListItem","ListItemText","ListItemAvatar","Avatar","CommentOutlinedIcon","FavoriteBorderOutlinedIcon","SendIcon","DeleteCommentPop","DeleteOutlineIcon","TextField","Button","useState","deleteReplyRequest","createReplyRequest","likeReplyRequest","unlikeReplyRequest","deleteReplyModeratorRequest","connect","isLogged","Reply","props","isOpen","setOpen","text","setText","anchorEl","setAnchorEl","router","handleChange","e","target","value","handleClick","event","currentTarget","handleClose","onDeleteReply","deleteReply","postId","values","replyId","item","id","replyTo","username","content","onLikeReply","push","likeReply","onUnlike","unLikeReply","handleSubmit","createReply","commentId","parentId","document","getElementById","onDeleteReplyModerator","deleteReplyModerator","renderDeleteIcon","auth","post","isOk","user","comMods","length","map","x","community","slug","handleDeleteOperation","replyUserInfo","userName","parent","profileImagePath","parentReplyUserName","marginLeft","borderRadius","display","padding","isLoggedLiked","likeCount","isLoggedReply","width","mapDispatchToProps","dispatch","payload","mapStateToProps","state","data","postDetail"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport { useRouter } from \"next/router\";\r\nimport Link from \"next/link\";\r\nimport ListItem from \"@material-ui/core/ListItem\";\r\nimport ListItemText from \"@material-ui/core/ListItemText\";\r\nimport ListItemAvatar from \"@material-ui/core/ListItemAvatar\";\r\nimport Avatar from \"@material-ui/core/Avatar\";\r\nimport CommentOutlinedIcon from \"@material-ui/icons/CommentOutlined\";\r\nimport FavoriteBorderOutlinedIcon from \"@material-ui/icons/FavoriteBorderOutlined\";\r\nimport SendIcon from \"@material-ui/icons/Send\";\r\nimport DeleteCommentPop from \"./deleteCommentPop\";\r\nimport DeleteOutlineIcon from \"@material-ui/icons/DeleteOutline\";\r\nimport { TextField, Button } from \"@material-ui/core\";\r\nimport { useState } from \"react\";\r\nimport {\r\n  deleteReplyRequest,\r\n  createReplyRequest,\r\n  likeReplyRequest,\r\n  unlikeReplyRequest,\r\n  deleteReplyModeratorRequest,\r\n} from \"../../../lib/comment/actions\";\r\nimport { connect } from \"react-redux\";\r\nimport { isLogged } from \"../../../lib/helpers\";\r\n\r\nfunction Reply(props) {\r\n  const [isOpen, setOpen] = useState(false);\r\n  const [text, setText] = useState(\"\");\r\n  const [anchorEl, setAnchorEl] = React.useState(null);\r\n  const router = useRouter();\r\n  const handleChange = (e) => {\r\n    setText(e.target.value);\r\n  };\r\n\r\n  const handleClick = (event) => {\r\n    setAnchorEl(event.currentTarget);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setAnchorEl(null);\r\n  };\r\n\r\n  const onDeleteReply = () => {\r\n    const { deleteReply, postId } = props;\r\n    const values = { replyId: item.id, postId };\r\n    deleteReply(values);\r\n  };\r\n\r\n  const replyTo = (username, content) => {\r\n    return username == null ? (\r\n      <p>{content}</p>\r\n    ) : (\r\n      <div>\r\n        <Link href={`/${username}`}>{`@${username}  `}</Link>\r\n        {content}\r\n      </div>\r\n    );\r\n  };\r\n\r\n  const onLikeReply = () => {\r\n    if (!isLogged()) {\r\n      router.push(\"/giris-yap\");\r\n    }\r\n    const values = { postId: props.postId, replyId: item.id };\r\n    const { likeReply } = props;\r\n    likeReply(values);\r\n  };\r\n\r\n  const onUnlike = () => {\r\n    if (!isLogged()) {\r\n      router.push(\"/giris-yap\");\r\n    }\r\n    const values = { postId: props.postId, replyId: item.id };\r\n    const { unLikeReply } = props;\r\n    unLikeReply(values);\r\n  };\r\n\r\n  const handleSubmit = () => {\r\n    if (!isLogged()) {\r\n      router.push(\"/giris-yap\");\r\n      return;\r\n    } else {\r\n      const { createReply, postId, item, commentId } = props;\r\n      const values = { postId, commentId, content: text, parentId: item.id };\r\n      createReply(values);\r\n      document.getElementById(\"comment\").value = \"\";\r\n      setOpen(false);\r\n    }\r\n  };\r\n\r\n  const onDeleteReplyModerator = () => {\r\n    const values = { replyId: item.id, postId: props.postId };\r\n    const { deleteReplyModerator } = props;\r\n    deleteReplyModerator(values);\r\n    handleClose();\r\n  };\r\n\r\n  const renderDeleteIcon = () => {\r\n    const { auth, post } = props;\r\n    let isOk = false;\r\n    if (\r\n      auth &&\r\n      auth.user &&\r\n      auth.user.comMods &&\r\n      auth.user.comMods.length > 0\r\n    ) {\r\n      auth.user.comMods.map((x) => {\r\n        if (x === post.community.slug) {\r\n          isOk = true;\r\n        }\r\n      });\r\n    }\r\n    //setModerator(isOk);\r\n    return isOk;\r\n  };\r\n\r\n  const handleDeleteOperation = () => {\r\n    const { auth } = props;\r\n    if (\r\n      renderDeleteIcon() &&\r\n      auth &&\r\n      auth.user &&\r\n      auth.user.username !== item.replyUserInfo.userName\r\n    ) {\r\n      onDeleteReplyModerator();\r\n    } else {\r\n      onDeleteReply();\r\n    }\r\n    handleClose();\r\n  };\r\n\r\n  const { item } = props;\r\n  const { parent } = item;\r\n  return (\r\n    item && (\r\n      <div key={item.id}>\r\n        <ListItem className=\"reply_item\" alignItems=\"flex-start\">\r\n          <ListItemAvatar>\r\n            <Avatar\r\n              alt=\"Remy Sharp\"\r\n              src={item.replyUserInfo.profileImagePath}\r\n            />\r\n          </ListItemAvatar>\r\n          <ListItemText\r\n            primary={item.replyUserInfo.userName}\r\n            secondary={replyTo(parent.parentReplyUserName, item.content)}\r\n          />\r\n        </ListItem>\r\n        <div\r\n          style={{ marginLeft: \"7.2rem\" }}\r\n          className=\"comment_icon_container\"\r\n        >\r\n          <CommentOutlinedIcon\r\n            style={{\r\n              borderRadius: \"2px\",\r\n              display: \"inline-block\",\r\n              padding: \"4px\",\r\n            }}\r\n          />\r\n          <Link href=\"#\" onClick={() => setOpen(!isOpen)}>\r\n            <p className=\"reply_text\">{isOpen ? \"boşver\" : \"salla\"}</p>\r\n          </Link>\r\n          <FavoriteBorderOutlinedIcon\r\n            className={\r\n              item.isLoggedLiked\r\n                ? \"checked_comment_like_icon\"\r\n                : \"comment_like_icon\"\r\n            }\r\n            onClick={item.isLoggedLiked ? onUnlike : onLikeReply}\r\n          />\r\n          <p className=\"reply_text\">{item.likeCount}</p>\r\n          {(item.isLoggedReply || renderDeleteIcon()) && (\r\n            <div>\r\n              <DeleteOutlineIcon\r\n                onClick={handleClick}\r\n                className=\"comment_delete_icon\"\r\n              />\r\n              <DeleteCommentPop\r\n                onSubmit={handleDeleteOperation}\r\n                onClose={handleClose}\r\n                anchorEl={anchorEl}\r\n              />\r\n            </div>\r\n          )}\r\n        </div>\r\n        {isOpen && (\r\n          <div>\r\n            <TextField\r\n              id=\"comment\"\r\n              label=\"Bu gönderiye salla\"\r\n              multiline\r\n              name=\"comment\"\r\n              onChange={handleChange}\r\n              rows={4}\r\n              variant=\"outlined\"\r\n              style={{ width: \"100%\", borderRadius: \"10px\" }}\r\n            />\r\n            <Button\r\n              className=\"comment_button\"\r\n              variant=\"contained\"\r\n              color=\"primary\"\r\n              disabled={!text}\r\n              onClick={handleSubmit}\r\n              endIcon={<SendIcon />}\r\n            >\r\n              Salla Gitsin\r\n            </Button>\r\n          </div>\r\n        )}\r\n      </div>\r\n    )\r\n  );\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => ({\r\n  deleteReply: (payload) => dispatch(deleteReplyRequest(payload)),\r\n  createReply: (payload) => dispatch(createReplyRequest(payload)),\r\n  likeReply: (payload) => dispatch(likeReplyRequest(payload)),\r\n  unLikeReply: (payload) => dispatch(unlikeReplyRequest(payload)),\r\n  deleteReplyModerator: (payload) =>\r\n    dispatch(deleteReplyModeratorRequest(payload)),\r\n});\r\n\r\nconst mapStateToProps = (state) => ({\r\n  auth: state.auth.data,\r\n  post: state.postDetail.data,\r\n});\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Reply);\r\n"]},"metadata":{},"sourceType":"module"}