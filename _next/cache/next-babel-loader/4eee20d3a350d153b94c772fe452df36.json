{"ast":null,"code":"var _jsxFileName = \"D:\\\\repos\\\\saalla-next.js\\\\components\\\\CommentList\\\\components\\\\comment.jsx\";\nvar __jsx = React.createElement;\nimport React, { useState } from \"react\";\nimport { useRouter } from \"next/router\";\nimport Link from \"next/link\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport ListItem from \"@material-ui/core/ListItem\";\nimport Divider from \"@material-ui/core/Divider\";\nimport SendIcon from \"@material-ui/icons/Send\";\nimport ListItemText from \"@material-ui/core/ListItemText\";\nimport ListItemAvatar from \"@material-ui/core/ListItemAvatar\";\nimport Avatar from \"@material-ui/core/Avatar\";\nimport CommentOutlinedIcon from \"@material-ui/icons/CommentOutlined\";\nimport DeleteOutlineIcon from \"@material-ui/icons/DeleteOutline\";\nimport FavoriteBorderOutlinedIcon from \"@material-ui/icons/FavoriteBorderOutlined\";\nimport { TextField, Button } from \"@material-ui/core\";\nimport Reply from \"./reply\";\nimport { createReplyRequest, likeCommentRequest, unlikeCommentRequest, deleteCommentRequest, deleteCommentModeratorRequest } from \"../../../lib/comment/actions\";\nimport { connect } from \"react-redux\";\nimport { readLocalStorage, isLogged } from \"../../../lib/helpers\";\nimport DeleteCommentPop from \"./deleteCommentPop\";\nconst useStyles = makeStyles(theme => ({\n  likeIcon: {\n    marginLeft: \"0.5rem\",\n    borderRadius: \"2px\",\n    display: \"inline-block\",\n    padding: \"4px\",\n    cursor: \"pointer\"\n  },\n  commentIcon: {\n    borderRadius: \"2px\",\n    display: \"inline-block\",\n    padding: \"4px\"\n  },\n  deleteIcon: {\n    borderRadius: \"2px\",\n    display: \"inline-block\",\n    padding: \"4px\",\n    cursor: \"pointer\",\n    marginLeft: \"0.5rem\"\n  }\n}));\n\nfunction Comment(props) {\n  const classes = useStyles();\n  const {\n    0: isOpen,\n    1: setOpen\n  } = useState(false);\n  const {\n    0: text,\n    1: setText\n  } = useState(\"\");\n  const [anchorEl, setAnchorEl] = React.useState(null);\n  const router = useRouter();\n  const {\n    item\n  } = props;\n\n  const handleChange = e => {\n    setText(e.target.value);\n  };\n\n  const handleSubmit = () => {\n    const token = readLocalStorage(\"token\");\n    const user = readLocalStorage(\"user\");\n\n    if (!token || !user) {\n      router.push(\"/giris-yap\");\n      return;\n    } else {\n      const {\n        createReply,\n        postId,\n        item\n      } = props;\n      const values = {\n        postId,\n        commentId: item.id,\n        content: text\n      };\n      createReply(values);\n      document.getElementById(\"comment\").value = \"\";\n      setOpen(false);\n    }\n  };\n\n  const onLikeComment = () => {\n    if (!isLogged()) {\n      router.push(\"/giris-yap\");\n    }\n\n    const values = {\n      postId: props.postId,\n      commentId: item.id\n    };\n    const {\n      likeComment\n    } = props;\n    likeComment(values);\n  };\n\n  const onUnlike = () => {\n    if (!isLogged()) {\n      router.push(\"/giris-yap\");\n    }\n\n    const values = {\n      postId: props.postId,\n      commentId: item.id\n    };\n    const {\n      unLikeComment\n    } = props;\n    unLikeComment(values);\n  };\n\n  const onDeleteComment = () => {\n    const values = {\n      commentId: item.id,\n      postId: props.postId\n    };\n    const {\n      deleteComment\n    } = props;\n    deleteComment(values);\n    handleClose();\n  };\n\n  const onDeleteCommentModerator = () => {\n    const values = {\n      commentId: item.id,\n      postId: props.postId\n    };\n    const {\n      deleteCommentModerator\n    } = props;\n    deleteCommentModerator(values);\n    handleClose();\n  };\n\n  const handleClick = event => {\n    setAnchorEl(event.currentTarget);\n  };\n\n  const handleClose = () => {\n    setAnchorEl(null);\n  };\n\n  const renderDeleteIcon = () => {\n    const {\n      auth,\n      post\n    } = props;\n    let isOk = false;\n\n    if (auth && auth.user && auth.user.comMods && auth.user.comMods.length > 0) {\n      auth.user.comMods.map(x => {\n        if (x === post.community.slug) {\n          isOk = true;\n        }\n      });\n    } //setModerator(isOk);\n\n\n    return isOk;\n  };\n\n  const handleDeleteOperation = () => {\n    const {\n      auth\n    } = props;\n\n    if (renderDeleteIcon() && auth && auth.user && auth.user.username !== item.commentUserInfo.userName) {\n      onDeleteCommentModerator();\n    } else {\n      onDeleteComment();\n    }\n  };\n\n  return __jsx(React.Fragment, {\n    key: item.id,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 5\n    }\n  }, __jsx(ListItem, {\n    className: \"comment_item\",\n    alignItems: \"flex-start\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 7\n    }\n  }, __jsx(ListItemAvatar, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 9\n    }\n  }, __jsx(Avatar, {\n    alt: \"Remy Sharp\",\n    src: item.commentUserInfo.profileImagePath,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 11\n    }\n  })), __jsx(ListItemText, {\n    primary: __jsx(Link, {\n      href: `/${item.commentUserInfo && item.commentUserInfo.userName}`,\n      style: {\n        color: \"black\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 13\n      }\n    }, item.commentUserInfo && item.commentUserInfo.userName),\n    secondary: item.content,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 9\n    }\n  })), __jsx(\"div\", {\n    className: \"comment_icon_container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 7\n    }\n  }, __jsx(CommentOutlinedIcon, {\n    className: classes.commentIcon,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 9\n    }\n  }), __jsx(Link, {\n    href: \"#\",\n    onClick: () => setOpen(!isOpen),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 9\n    }\n  }, __jsx(\"p\", {\n    className: \"reply_text\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 11\n    }\n  }, isOpen ? \"boşver\" : \"salla\")), __jsx(FavoriteBorderOutlinedIcon, {\n    className: item.isLoggedLiked ? \"checked_comment_like_icon\" : \"comment_like_icon\",\n    onClick: item.isLoggedLiked ? onUnlike : onLikeComment,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 9\n    }\n  }), __jsx(\"p\", {\n    className: \"reply_text\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 185,\n      columnNumber: 9\n    }\n  }, item.likeCount), (item.isLoggedComment || renderDeleteIcon()) && __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 11\n    }\n  }, __jsx(DeleteOutlineIcon, {\n    onClick: handleClick,\n    className: \"comment_delete_icon\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 188,\n      columnNumber: 13\n    }\n  }), __jsx(DeleteCommentPop, {\n    onSubmit: handleDeleteOperation,\n    onClose: handleClose,\n    anchorEl: anchorEl,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 192,\n      columnNumber: 13\n    }\n  })), (item.isLoggedComment || renderDeleteIcon()) && __jsx(\"p\", {\n    className: \"reply_text\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 200,\n      columnNumber: 11\n    }\n  }, \"sil\")), isOpen && __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 204,\n      columnNumber: 9\n    }\n  }, __jsx(TextField, {\n    id: \"comment\",\n    label: \"Bu g\\xF6nderiye salla\",\n    multiline: true,\n    name: \"comment\",\n    onChange: handleChange,\n    rows: 4,\n    variant: \"outlined\",\n    style: {\n      width: \"100%\",\n      borderRadius: \"10px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 205,\n      columnNumber: 11\n    }\n  }), __jsx(Button, {\n    className: \"comment_button\",\n    variant: \"contained\",\n    color: \"primary\",\n    disabled: !text,\n    onClick: handleSubmit,\n    endIcon: __jsx(SendIcon, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 221,\n        columnNumber: 22\n      }\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 215,\n      columnNumber: 11\n    }\n  }, \"Salla Gitsin\")), item && item.replies && item.replies.map((reply, index) => __jsx(Reply, {\n    key: reply.id,\n    item: reply,\n    postId: props.postId,\n    commentId: item.id,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 230,\n      columnNumber: 11\n    }\n  })), __jsx(Divider, {\n    variant: \"inset\",\n    component: \"li\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 237,\n      columnNumber: 7\n    }\n  }));\n}\n\nconst mapDispatchToProps = dispatch => ({\n  createReply: payload => dispatch(createReplyRequest(payload)),\n  likeComment: payload => dispatch(likeCommentRequest(payload)),\n  unLikeComment: payload => dispatch(unlikeCommentRequest(payload)),\n  deleteComment: payload => dispatch(deleteCommentRequest(payload)),\n  deleteCommentModerator: payload => dispatch(deleteCommentModeratorRequest(payload))\n});\n\nconst mapStateToProps = state => ({\n  auth: state.auth.data,\n  post: state.postDetail.data\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Comment);","map":{"version":3,"sources":["D:/repos/saalla-next.js/components/CommentList/components/comment.jsx"],"names":["React","useState","useRouter","Link","makeStyles","ListItem","Divider","SendIcon","ListItemText","ListItemAvatar","Avatar","CommentOutlinedIcon","DeleteOutlineIcon","FavoriteBorderOutlinedIcon","TextField","Button","Reply","createReplyRequest","likeCommentRequest","unlikeCommentRequest","deleteCommentRequest","deleteCommentModeratorRequest","connect","readLocalStorage","isLogged","DeleteCommentPop","useStyles","theme","likeIcon","marginLeft","borderRadius","display","padding","cursor","commentIcon","deleteIcon","Comment","props","classes","isOpen","setOpen","text","setText","anchorEl","setAnchorEl","router","item","handleChange","e","target","value","handleSubmit","token","user","push","createReply","postId","values","commentId","id","content","document","getElementById","onLikeComment","likeComment","onUnlike","unLikeComment","onDeleteComment","deleteComment","handleClose","onDeleteCommentModerator","deleteCommentModerator","handleClick","event","currentTarget","renderDeleteIcon","auth","post","isOk","comMods","length","map","x","community","slug","handleDeleteOperation","username","commentUserInfo","userName","profileImagePath","color","isLoggedLiked","likeCount","isLoggedComment","width","replies","reply","index","mapDispatchToProps","dispatch","payload","mapStateToProps","state","data","postDetail"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\r\nimport { useRouter } from \"next/router\";\r\nimport Link from \"next/link\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport ListItem from \"@material-ui/core/ListItem\";\r\nimport Divider from \"@material-ui/core/Divider\";\r\nimport SendIcon from \"@material-ui/icons/Send\";\r\nimport ListItemText from \"@material-ui/core/ListItemText\";\r\nimport ListItemAvatar from \"@material-ui/core/ListItemAvatar\";\r\nimport Avatar from \"@material-ui/core/Avatar\";\r\nimport CommentOutlinedIcon from \"@material-ui/icons/CommentOutlined\";\r\nimport DeleteOutlineIcon from \"@material-ui/icons/DeleteOutline\";\r\nimport FavoriteBorderOutlinedIcon from \"@material-ui/icons/FavoriteBorderOutlined\";\r\nimport { TextField, Button } from \"@material-ui/core\";\r\nimport Reply from \"./reply\";\r\nimport {\r\n  createReplyRequest,\r\n  likeCommentRequest,\r\n  unlikeCommentRequest,\r\n  deleteCommentRequest,\r\n  deleteCommentModeratorRequest,\r\n} from \"../../../lib/comment/actions\";\r\nimport { connect } from \"react-redux\";\r\nimport { readLocalStorage, isLogged } from \"../../../lib/helpers\";\r\nimport DeleteCommentPop from \"./deleteCommentPop\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  likeIcon: {\r\n    marginLeft: \"0.5rem\",\r\n    borderRadius: \"2px\",\r\n    display: \"inline-block\",\r\n    padding: \"4px\",\r\n    cursor: \"pointer\",\r\n  },\r\n  commentIcon: {\r\n    borderRadius: \"2px\",\r\n    display: \"inline-block\",\r\n    padding: \"4px\",\r\n  },\r\n  deleteIcon: {\r\n    borderRadius: \"2px\",\r\n    display: \"inline-block\",\r\n    padding: \"4px\",\r\n    cursor: \"pointer\",\r\n    marginLeft: \"0.5rem\",\r\n  },\r\n}));\r\n\r\nfunction Comment(props) {\r\n  const classes = useStyles();\r\n  const [isOpen, setOpen] = useState(false);\r\n  const [text, setText] = useState(\"\");\r\n  const [anchorEl, setAnchorEl] = React.useState(null);\r\n\r\n  const router = useRouter();\r\n\r\n  const { item } = props;\r\n\r\n  const handleChange = (e) => {\r\n    setText(e.target.value);\r\n  };\r\n\r\n  const handleSubmit = () => {\r\n    const token = readLocalStorage(\"token\");\r\n    const user = readLocalStorage(\"user\");\r\n    if (!token || !user) {\r\n      router.push(\"/giris-yap\");\r\n      return;\r\n    } else {\r\n      const { createReply, postId, item } = props;\r\n      const values = { postId, commentId: item.id, content: text };\r\n      createReply(values);\r\n      document.getElementById(\"comment\").value = \"\";\r\n      setOpen(false);\r\n    }\r\n  };\r\n\r\n  const onLikeComment = () => {\r\n    if (!isLogged()) {\r\n      router.push(\"/giris-yap\");\r\n    }\r\n    const values = { postId: props.postId, commentId: item.id };\r\n    const { likeComment } = props;\r\n    likeComment(values);\r\n  };\r\n\r\n  const onUnlike = () => {\r\n    if (!isLogged()) {\r\n      router.push(\"/giris-yap\");\r\n    }\r\n    const values = { postId: props.postId, commentId: item.id };\r\n    const { unLikeComment } = props;\r\n    unLikeComment(values);\r\n  };\r\n\r\n  const onDeleteComment = () => {\r\n    const values = { commentId: item.id, postId: props.postId };\r\n    const { deleteComment } = props;\r\n    deleteComment(values);\r\n    handleClose();\r\n  };\r\n\r\n  const onDeleteCommentModerator = () => {\r\n    const values = { commentId: item.id, postId: props.postId };\r\n    const { deleteCommentModerator } = props;\r\n    deleteCommentModerator(values);\r\n    handleClose();\r\n  };\r\n\r\n  const handleClick = (event) => {\r\n    setAnchorEl(event.currentTarget);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setAnchorEl(null);\r\n  };\r\n\r\n  const renderDeleteIcon = () => {\r\n    const { auth, post } = props;\r\n    let isOk = false;\r\n    if (\r\n      auth &&\r\n      auth.user &&\r\n      auth.user.comMods &&\r\n      auth.user.comMods.length > 0\r\n    ) {\r\n      auth.user.comMods.map((x) => {\r\n        if (x === post.community.slug) {\r\n          isOk = true;\r\n        }\r\n      });\r\n    }\r\n    //setModerator(isOk);\r\n    return isOk;\r\n  };\r\n\r\n  const handleDeleteOperation = () => {\r\n    const { auth } = props;\r\n    if (\r\n      renderDeleteIcon() &&\r\n      auth &&\r\n      auth.user &&\r\n      auth.user.username !== item.commentUserInfo.userName\r\n    ) {\r\n      onDeleteCommentModerator();\r\n    } else {\r\n      onDeleteComment();\r\n    }\r\n  };\r\n\r\n  return (\r\n    <React.Fragment key={item.id}>\r\n      <ListItem className=\"comment_item\" alignItems=\"flex-start\">\r\n        <ListItemAvatar>\r\n          <Avatar\r\n            alt=\"Remy Sharp\"\r\n            src={item.commentUserInfo.profileImagePath}\r\n          />\r\n        </ListItemAvatar>\r\n        <ListItemText\r\n          primary={\r\n            <Link\r\n              href={`/${item.commentUserInfo && item.commentUserInfo.userName}`}\r\n              style={{ color: \"black\" }}\r\n            >\r\n              {item.commentUserInfo && item.commentUserInfo.userName}\r\n            </Link>\r\n          }\r\n          secondary={item.content}\r\n        />\r\n      </ListItem>\r\n      <div className=\"comment_icon_container\">\r\n        <CommentOutlinedIcon className={classes.commentIcon} />\r\n        <Link href=\"#\" onClick={() => setOpen(!isOpen)}>\r\n          <p className=\"reply_text\">{isOpen ? \"boşver\" : \"salla\"}</p>\r\n        </Link>\r\n        <FavoriteBorderOutlinedIcon\r\n          className={\r\n            item.isLoggedLiked\r\n              ? \"checked_comment_like_icon\"\r\n              : \"comment_like_icon\"\r\n          }\r\n          onClick={item.isLoggedLiked ? onUnlike : onLikeComment}\r\n        />\r\n        <p className=\"reply_text\">{item.likeCount}</p>\r\n        {(item.isLoggedComment || renderDeleteIcon()) && (\r\n          <div>\r\n            <DeleteOutlineIcon\r\n              onClick={handleClick}\r\n              className=\"comment_delete_icon\"\r\n            />\r\n            <DeleteCommentPop\r\n              onSubmit={handleDeleteOperation}\r\n              onClose={handleClose}\r\n              anchorEl={anchorEl}\r\n            />\r\n          </div>\r\n        )}\r\n        {(item.isLoggedComment || renderDeleteIcon()) && (\r\n          <p className=\"reply_text\">sil</p>\r\n        )}\r\n      </div>\r\n      {isOpen && (\r\n        <div>\r\n          <TextField\r\n            id=\"comment\"\r\n            label=\"Bu gönderiye salla\"\r\n            multiline\r\n            name=\"comment\"\r\n            onChange={handleChange}\r\n            rows={4}\r\n            variant=\"outlined\"\r\n            style={{ width: \"100%\", borderRadius: \"10px\" }}\r\n          />\r\n          <Button\r\n            className=\"comment_button\"\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            disabled={!text}\r\n            onClick={handleSubmit}\r\n            endIcon={<SendIcon />}\r\n          >\r\n            Salla Gitsin\r\n          </Button>\r\n        </div>\r\n      )}\r\n      {item &&\r\n        item.replies &&\r\n        item.replies.map((reply, index) => (\r\n          <Reply\r\n            key={reply.id}\r\n            item={reply}\r\n            postId={props.postId}\r\n            commentId={item.id}\r\n          />\r\n        ))}\r\n      <Divider variant=\"inset\" component=\"li\" />\r\n    </React.Fragment>\r\n  );\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => ({\r\n  createReply: (payload) => dispatch(createReplyRequest(payload)),\r\n  likeComment: (payload) => dispatch(likeCommentRequest(payload)),\r\n  unLikeComment: (payload) => dispatch(unlikeCommentRequest(payload)),\r\n  deleteComment: (payload) => dispatch(deleteCommentRequest(payload)),\r\n  deleteCommentModerator: (payload) =>\r\n    dispatch(deleteCommentModeratorRequest(payload)),\r\n});\r\n\r\nconst mapStateToProps = (state) => ({\r\n  auth: state.auth.data,\r\n  post: state.postDetail.data,\r\n});\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Comment);\r\n"]},"metadata":{},"sourceType":"module"}