{"ast":null,"code":"var _jsxFileName = \"D:\\\\repos\\\\saalla-next.js\\\\components\\\\CommentList\\\\components\\\\reply.jsx\";\nvar __jsx = React.createElement;\nimport React from \"react\";\nimport { useRouter } from \"next/router\";\nimport Link from \"next/link\";\nimport ListItem from \"@material-ui/core/ListItem\";\nimport ListItemText from \"@material-ui/core/ListItemText\";\nimport ListItemAvatar from \"@material-ui/core/ListItemAvatar\";\nimport Avatar from \"@material-ui/core/Avatar\";\nimport CommentOutlinedIcon from \"@material-ui/icons/CommentOutlined\";\nimport FavoriteBorderOutlinedIcon from \"@material-ui/icons/FavoriteBorderOutlined\";\nimport SendIcon from \"@material-ui/icons/Send\";\nimport DeleteCommentPop from \"./deleteCommentPop\";\nimport DeleteOutlineIcon from \"@material-ui/icons/DeleteOutline\";\nimport { TextField, Button } from \"@material-ui/core\";\nimport { useState } from \"react\";\nimport { deleteReplyRequest, createReplyRequest, likeReplyRequest, unlikeReplyRequest, deleteReplyModeratorRequest } from \"../../../lib/comment/actions\";\nimport { connect } from \"react-redux\";\nimport { isLogged } from \"../../../lib/helpers\";\n\nfunction Reply(props) {\n  const {\n    0: isOpen,\n    1: setOpen\n  } = useState(false);\n  const {\n    0: text,\n    1: setText\n  } = useState(\"\");\n  const [anchorEl, setAnchorEl] = React.useState(null);\n  const router = useRouter();\n\n  const handleChange = e => {\n    setText(e.target.value);\n  };\n\n  const handleClick = event => {\n    setAnchorEl(event.currentTarget);\n  };\n\n  const handleClose = () => {\n    setAnchorEl(null);\n  };\n\n  const onDeleteReply = () => {\n    const {\n      deleteReply,\n      postId\n    } = props;\n    const values = {\n      replyId: item.id,\n      postId\n    };\n    deleteReply(values);\n  };\n\n  const replyTo = (username, content) => {\n    return username == null ? __jsx(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 7\n      }\n    }, content) : __jsx(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 7\n      }\n    }, __jsx(Link, {\n      href: `/${username}`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 9\n      }\n    }, `@${username}  `), content);\n  };\n\n  const onLikeReply = () => {\n    if (!isLogged()) {\n      router.push(\"/giris-yap\");\n    }\n\n    const values = {\n      postId: props.postId,\n      replyId: item.id\n    };\n    const {\n      likeReply\n    } = props;\n    likeReply(values);\n  };\n\n  const onUnlike = () => {\n    if (!isLogged()) {\n      router.push(\"/giris-yap\");\n    }\n\n    const values = {\n      postId: props.postId,\n      replyId: item.id\n    };\n    const {\n      unLikeReply\n    } = props;\n    unLikeReply(values);\n  };\n\n  const handleSubmit = () => {\n    if (!isLogged()) {\n      router.push(\"/giris-yap\");\n      return;\n    } else {\n      const {\n        createReply,\n        postId,\n        item,\n        commentId\n      } = props;\n      const values = {\n        postId,\n        commentId,\n        content: text,\n        parentId: item.id\n      };\n      createReply(values);\n      document.getElementById(\"comment\").value = \"\";\n      setOpen(false);\n    }\n  };\n\n  const onDeleteReplyModerator = () => {\n    const values = {\n      replyId: item.id,\n      postId: props.postId\n    };\n    const {\n      deleteReplyModerator\n    } = props;\n    deleteReplyModerator(values);\n    handleClose();\n  };\n\n  const renderDeleteIcon = () => {\n    const {\n      auth,\n      post\n    } = props;\n    let isOk = false;\n\n    if (auth && auth.user && auth.user.comMods && auth.user.comMods.length > 0) {\n      auth.user.comMods.map(x => {\n        if (x === post.community.slug) {\n          isOk = true;\n        }\n      });\n    } //setModerator(isOk);\n\n\n    return isOk;\n  };\n\n  const handleDeleteOperation = () => {\n    const {\n      auth\n    } = props;\n\n    if (renderDeleteIcon() && auth && auth.user && auth.user.username !== item.replyUserInfo.userName) {\n      onDeleteReplyModerator();\n    } else {\n      onDeleteReply();\n    }\n\n    handleClose();\n  };\n\n  const {\n    item\n  } = props;\n  const {\n    parent\n  } = item;\n  return item && __jsx(\"div\", {\n    key: item.id,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 7\n    }\n  }, __jsx(ListItem, {\n    className: \"reply_item\",\n    alignItems: \"flex-start\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 9\n    }\n  }, __jsx(ListItemAvatar, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 11\n    }\n  }, __jsx(Avatar, {\n    alt: \"Remy Sharp\",\n    src: item.replyUserInfo.profileImagePath,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 13\n    }\n  })), __jsx(ListItemText, {\n    primary: item.replyUserInfo.userName,\n    secondary: replyTo(parent.parentReplyUserName, item.content),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 11\n    }\n  })), __jsx(\"div\", {\n    style: {\n      marginLeft: \"7.2rem\"\n    },\n    className: \"comment_icon_container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 9\n    }\n  }, __jsx(CommentOutlinedIcon, {\n    style: {\n      borderRadius: \"2px\",\n      display: \"inline-block\",\n      padding: \"4px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 11\n    }\n  }), __jsx(Link, {\n    href: \"#\",\n    onClick: () => setOpen(!isOpen),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 11\n    }\n  }, __jsx(\"p\", {\n    className: \"reply_text\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 13\n    }\n  }, isOpen ? \"boşver\" : \"salla\")), __jsx(FavoriteBorderOutlinedIcon, {\n    className: item.isLoggedLiked ? \"checked_comment_like_icon\" : \"comment_like_icon\",\n    onClick: item.isLoggedLiked ? onUnlike : onLikeReply,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 11\n    }\n  }), __jsx(\"p\", {\n    className: \"reply_text\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 11\n    }\n  }, item.likeCount), (item.isLoggedReply || renderDeleteIcon()) && __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 13\n    }\n  }, __jsx(DeleteOutlineIcon, {\n    onClick: handleClick,\n    className: \"comment_delete_icon\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 15\n    }\n  }), __jsx(DeleteCommentPop, {\n    onSubmit: handleDeleteOperation,\n    onClose: handleClose,\n    anchorEl: anchorEl,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 15\n    }\n  }))), isOpen && __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 11\n    }\n  }, __jsx(TextField, {\n    id: \"comment\",\n    label: \"Bu g\\xF6nderiye salla\",\n    multiline: true,\n    name: \"comment\",\n    onChange: handleChange,\n    rows: 4,\n    variant: \"outlined\",\n    style: {\n      width: \"100%\",\n      borderRadius: \"10px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 13\n    }\n  }), __jsx(Button, {\n    className: \"comment_button\",\n    variant: \"contained\",\n    color: \"primary\",\n    disabled: !text,\n    onClick: handleSubmit,\n    endIcon: __jsx(SendIcon, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 203,\n        columnNumber: 24\n      }\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 197,\n      columnNumber: 13\n    }\n  }, \"Salla Gitsin\")));\n}\n\nconst mapDispatchToProps = dispatch => ({\n  deleteReply: payload => dispatch(deleteReplyRequest(payload)),\n  createReply: payload => dispatch(createReplyRequest(payload)),\n  likeReply: payload => dispatch(likeReplyRequest(payload)),\n  unLikeReply: payload => dispatch(unlikeReplyRequest(payload)),\n  deleteReplyModerator: payload => dispatch(deleteReplyModeratorRequest(payload))\n});\n\nconst mapStateToProps = state => ({\n  auth: state.auth.data,\n  post: state.postDetail.data\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Reply);","map":{"version":3,"sources":["D:/repos/saalla-next.js/components/CommentList/components/reply.jsx"],"names":["React","useRouter","Link","ListItem","ListItemText","ListItemAvatar","Avatar","CommentOutlinedIcon","FavoriteBorderOutlinedIcon","SendIcon","DeleteCommentPop","DeleteOutlineIcon","TextField","Button","useState","deleteReplyRequest","createReplyRequest","likeReplyRequest","unlikeReplyRequest","deleteReplyModeratorRequest","connect","isLogged","Reply","props","isOpen","setOpen","text","setText","anchorEl","setAnchorEl","router","handleChange","e","target","value","handleClick","event","currentTarget","handleClose","onDeleteReply","deleteReply","postId","values","replyId","item","id","replyTo","username","content","onLikeReply","push","likeReply","onUnlike","unLikeReply","handleSubmit","createReply","commentId","parentId","document","getElementById","onDeleteReplyModerator","deleteReplyModerator","renderDeleteIcon","auth","post","isOk","user","comMods","length","map","x","community","slug","handleDeleteOperation","replyUserInfo","userName","parent","profileImagePath","parentReplyUserName","marginLeft","borderRadius","display","padding","isLoggedLiked","likeCount","isLoggedReply","width","mapDispatchToProps","dispatch","payload","mapStateToProps","state","data","postDetail"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport { useRouter } from \"next/router\";\r\nimport Link from \"next/link\";\r\nimport ListItem from \"@material-ui/core/ListItem\";\r\nimport ListItemText from \"@material-ui/core/ListItemText\";\r\nimport ListItemAvatar from \"@material-ui/core/ListItemAvatar\";\r\nimport Avatar from \"@material-ui/core/Avatar\";\r\nimport CommentOutlinedIcon from \"@material-ui/icons/CommentOutlined\";\r\nimport FavoriteBorderOutlinedIcon from \"@material-ui/icons/FavoriteBorderOutlined\";\r\nimport SendIcon from \"@material-ui/icons/Send\";\r\nimport DeleteCommentPop from \"./deleteCommentPop\";\r\nimport DeleteOutlineIcon from \"@material-ui/icons/DeleteOutline\";\r\nimport { TextField, Button } from \"@material-ui/core\";\r\nimport { useState } from \"react\";\r\nimport {\r\n  deleteReplyRequest,\r\n  createReplyRequest,\r\n  likeReplyRequest,\r\n  unlikeReplyRequest,\r\n  deleteReplyModeratorRequest,\r\n} from \"../../../lib/comment/actions\";\r\nimport { connect } from \"react-redux\";\r\nimport { isLogged } from \"../../../lib/helpers\";\r\n\r\nfunction Reply(props) {\r\n  const [isOpen, setOpen] = useState(false);\r\n  const [text, setText] = useState(\"\");\r\n  const [anchorEl, setAnchorEl] = React.useState(null);\r\n  const router = useRouter();\r\n  const handleChange = (e) => {\r\n    setText(e.target.value);\r\n  };\r\n\r\n  const handleClick = (event) => {\r\n    setAnchorEl(event.currentTarget);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setAnchorEl(null);\r\n  };\r\n\r\n  const onDeleteReply = () => {\r\n    const { deleteReply, postId } = props;\r\n    const values = { replyId: item.id, postId };\r\n    deleteReply(values);\r\n  };\r\n\r\n  const replyTo = (username, content) => {\r\n    return username == null ? (\r\n      <p>{content}</p>\r\n    ) : (\r\n      <div>\r\n        <Link href={`/${username}`}>{`@${username}  `}</Link>\r\n        {content}\r\n      </div>\r\n    );\r\n  };\r\n\r\n  const onLikeReply = () => {\r\n    if (!isLogged()) {\r\n      router.push(\"/giris-yap\");\r\n    }\r\n    const values = { postId: props.postId, replyId: item.id };\r\n    const { likeReply } = props;\r\n    likeReply(values);\r\n  };\r\n\r\n  const onUnlike = () => {\r\n    if (!isLogged()) {\r\n      router.push(\"/giris-yap\");\r\n    }\r\n    const values = { postId: props.postId, replyId: item.id };\r\n    const { unLikeReply } = props;\r\n    unLikeReply(values);\r\n  };\r\n\r\n  const handleSubmit = () => {\r\n    if (!isLogged()) {\r\n      router.push(\"/giris-yap\");\r\n      return;\r\n    } else {\r\n      const { createReply, postId, item, commentId } = props;\r\n      const values = { postId, commentId, content: text, parentId: item.id };\r\n      createReply(values);\r\n      document.getElementById(\"comment\").value = \"\";\r\n      setOpen(false);\r\n    }\r\n  };\r\n\r\n  const onDeleteReplyModerator = () => {\r\n    const values = { replyId: item.id, postId: props.postId };\r\n    const { deleteReplyModerator } = props;\r\n    deleteReplyModerator(values);\r\n    handleClose();\r\n  };\r\n\r\n  const renderDeleteIcon = () => {\r\n    const { auth, post } = props;\r\n    let isOk = false;\r\n    if (\r\n      auth &&\r\n      auth.user &&\r\n      auth.user.comMods &&\r\n      auth.user.comMods.length > 0\r\n    ) {\r\n      auth.user.comMods.map((x) => {\r\n        if (x === post.community.slug) {\r\n          isOk = true;\r\n        }\r\n      });\r\n    }\r\n    //setModerator(isOk);\r\n    return isOk;\r\n  };\r\n\r\n  const handleDeleteOperation = () => {\r\n    const { auth } = props;\r\n    if (\r\n      renderDeleteIcon() &&\r\n      auth &&\r\n      auth.user &&\r\n      auth.user.username !== item.replyUserInfo.userName\r\n    ) {\r\n      onDeleteReplyModerator();\r\n    } else {\r\n      onDeleteReply();\r\n    }\r\n    handleClose();\r\n  };\r\n\r\n  const { item } = props;\r\n  const { parent } = item;\r\n  return (\r\n    item && (\r\n      <div key={item.id}>\r\n        <ListItem className=\"reply_item\" alignItems=\"flex-start\">\r\n          <ListItemAvatar>\r\n            <Avatar\r\n              alt=\"Remy Sharp\"\r\n              src={item.replyUserInfo.profileImagePath}\r\n            />\r\n          </ListItemAvatar>\r\n          <ListItemText\r\n            primary={item.replyUserInfo.userName}\r\n            secondary={replyTo(parent.parentReplyUserName, item.content)}\r\n          />\r\n        </ListItem>\r\n        <div\r\n          style={{ marginLeft: \"7.2rem\" }}\r\n          className=\"comment_icon_container\"\r\n        >\r\n          <CommentOutlinedIcon\r\n            style={{\r\n              borderRadius: \"2px\",\r\n              display: \"inline-block\",\r\n              padding: \"4px\",\r\n            }}\r\n          />\r\n          <Link href=\"#\" onClick={() => setOpen(!isOpen)}>\r\n            <p className=\"reply_text\">{isOpen ? \"boşver\" : \"salla\"}</p>\r\n          </Link>\r\n          <FavoriteBorderOutlinedIcon\r\n            className={\r\n              item.isLoggedLiked\r\n                ? \"checked_comment_like_icon\"\r\n                : \"comment_like_icon\"\r\n            }\r\n            onClick={item.isLoggedLiked ? onUnlike : onLikeReply}\r\n          />\r\n          <p className=\"reply_text\">{item.likeCount}</p>\r\n          {(item.isLoggedReply || renderDeleteIcon()) && (\r\n            <div>\r\n              <DeleteOutlineIcon\r\n                onClick={handleClick}\r\n                className=\"comment_delete_icon\"\r\n              />\r\n              <DeleteCommentPop\r\n                onSubmit={handleDeleteOperation}\r\n                onClose={handleClose}\r\n                anchorEl={anchorEl}\r\n              />\r\n            </div>\r\n          )}\r\n        </div>\r\n        {isOpen && (\r\n          <div>\r\n            <TextField\r\n              id=\"comment\"\r\n              label=\"Bu gönderiye salla\"\r\n              multiline\r\n              name=\"comment\"\r\n              onChange={handleChange}\r\n              rows={4}\r\n              variant=\"outlined\"\r\n              style={{ width: \"100%\", borderRadius: \"10px\" }}\r\n            />\r\n            <Button\r\n              className=\"comment_button\"\r\n              variant=\"contained\"\r\n              color=\"primary\"\r\n              disabled={!text}\r\n              onClick={handleSubmit}\r\n              endIcon={<SendIcon />}\r\n            >\r\n              Salla Gitsin\r\n            </Button>\r\n          </div>\r\n        )}\r\n      </div>\r\n    )\r\n  );\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => ({\r\n  deleteReply: (payload) => dispatch(deleteReplyRequest(payload)),\r\n  createReply: (payload) => dispatch(createReplyRequest(payload)),\r\n  likeReply: (payload) => dispatch(likeReplyRequest(payload)),\r\n  unLikeReply: (payload) => dispatch(unlikeReplyRequest(payload)),\r\n  deleteReplyModerator: (payload) =>\r\n    dispatch(deleteReplyModeratorRequest(payload)),\r\n});\r\n\r\nconst mapStateToProps = (state) => ({\r\n  auth: state.auth.data,\r\n  post: state.postDetail.data,\r\n});\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Reply);\r\n"]},"metadata":{},"sourceType":"module"}